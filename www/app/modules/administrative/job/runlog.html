<div>
  <div os-page-header>
    <ul os-breadcrumbs>
      <li>
        <a ui-sref="job-list">
          <span translate="jobs.list">Scheduled Jobs</span>
        </a>
      </li>
    </ul>

    <h3>
      <span>{{job.name}}</span>
      <span translate="jobs.run_logs">Run Log</span>
    </h3>
  </div>

  <div class="container">
    <div class="os-table">
      <div class="os-table-head">
        <div class="row">
          <div class="col col-xs-1">
            <span translate="jobs.id">Id</span>
          </div>
          <div class="col col-xs-3">
            <span translate="jobs.run_by">Run By</span>
          </div>
          <div class="col col-xs-2">
            <span translate="jobs.started_at">Started At</span>
          </div>
          <div class="col col-xs-2">
            <span translate="jobs.time_taken">Time Taken</span>
          </div>
          <div class="col col-xs-2">
            <span translate="jobs.status">Status</span>
          </div>
          <div class="col col-xs-2">
            <span>&nbsp;</span>
          </div>
        </div>
      </div>

      <div class="os-table-body">
        <div class="row" ng-repeat="jobRun in jobRuns">
          <div class="col col-xs-1">
            <span>#{{jobRun.id}}</span>
          </div>
          <div class="col col-xs-3">
            <span>{{jobRun.runBy.firstName}} {{jobRun.runBy.lastName}}</span>
          </div>
          <div class="col col-xs-2">
            <span>{{jobRun.startedAt | date: global.dateTimeFmt | osNoValue}}</span>
          </div>
          <div class="col col-xs-2" ng-switch on="jobRun.status != 'IN_PROGRESS'">
            <span ng-switch-when="true">
              <span>{{(jobRun.finishedAt - jobRun.startedAt) / 1000 | number : 2}}</span>
              <span translate="jobs.seconds">seconds</span>
            </span>
            <span ng-switch-when="false" translate="common.na"></span>
          </div>
          <div class="col col-xs-2">
            <span>{{'jobs.statuses.' + jobRun.status | translate}}</span>
          </div>
          <div class="col col-xs-2" show-if-allowed="jobResource.runOpts" 
            ng-switch on="jobRun.status != 'IN_PROGRESS' && !!jobRun.logFilePath">
            <a ng-switch-when="true" href="{{job.getResultUrl(jobRun.id)}}" target="_blank">
              <i class="fa fa-download"></i>
            </a>
            <span ng-switch-default>&nbsp;</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
